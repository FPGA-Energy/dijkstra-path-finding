#include <stdio.h>
#include <time.h>

  // the graph is stored as an adjecency list
  // where edges are grouped by start vertex
  //const int n=6;  // number of vertices
  //const int m=9;  // number of edges

  // number of vertices

  // number of edges

  // start vertex of edge, grouped by vertex
  // end vertex of edge
  // weight of edge
  // vertex to edge index link

//  String g="src\\s-ud-64-v.csv";
#define n  64
//  int n = 64;
#define m  314
//  int m = 314;

  int node1[] = {
      0, 0, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 14, 14, 15, 15, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 21, 21, 21, 21, 22, 22, 22, 22, 23, 23, 23, 23, 23, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 27, 27, 27, 28, 28, 28, 28, 29, 29, 29, 29, 30, 30, 30, 30, 31, 31, 31, 31, 31, 32, 32, 32, 32, 32, 33, 33, 33, 33, 33, 33, 34, 34, 34, 34, 34, 35, 35, 35, 35, 35, 36, 36, 36, 36, 36, 37, 37, 37, 37, 38, 38, 38, 38, 38, 39, 39, 39, 39, 39, 39, 39, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 41, 41, 41, 41, 41, 41, 42, 43, 43, 43, 43, 44, 44, 44, 44, 44, 45, 45, 45, 45, 46, 46, 46, 47, 47, 47, 48, 48, 48, 48, 48, 48, 49, 49, 49, 49, 49, 50, 50, 50, 50, 50, 51, 51, 51, 51, 52, 52, 53, 53, 54, 54, 54, 54, 55, 55, 55, 55, 56, 56, 56, 56, 56, 56, 57, 57, 57, 57, 57, 58, 58, 58, 58, 58, 59, 59, 59, 59, 60, 60, 60, 60, 60, 61, 61, 61, 62, 62, 62, 62, 62, 62, 62, 63, 63, 63, 63, 63
  };
  int node2[] = {
      12, 24, 35, 37, 39, 40, 7, 8, 19, 26, 38, 39, 44, 52, 60, 12, 27, 32, 4, 46, 60, 12, 3, 31, 34, 40, 41, 42, 45, 51, 54, 13, 24, 31, 48, 50, 62, 9, 20, 23, 26, 36, 55, 1, 11, 12, 24, 25, 28, 1, 16, 25, 40, 43, 44, 54, 58, 61, 16, 17, 22, 38, 41, 47, 5, 60, 36, 25, 43, 57, 62, 7, 0, 16, 20, 3, 4, 44, 60, 7, 17, 28, 33, 34, 38, 48, 5, 33, 51, 17, 48, 12, 26, 34, 44, 8, 9, 13, 15, 18, 32, 49, 53, 9, 17, 40, 62, 2, 30, 41, 55, 12, 43, 6, 33, 41, 51, 61, 39, 49, 59, 9, 35, 49, 57, 59, 6, 0, 25, 5, 7, 11, 24, 28, 37, 50, 7, 8, 16, 2, 34, 50, 58, 6, 3, 35, 44, 13, 25, 46, 7, 40, 50, 56, 58, 19, 31, 49, 57, 30, 33, 4, 5, 56, 17, 3, 41, 48, 52, 13, 14, 21, 31, 39, 47, 13, 16, 26, 4, 63, 1, 23, 27, 50, 59, 10, 45, 46, 58, 6, 1, 25, 61, 62, 13, 2, 45, 48, 9, 1, 2, 22, 33, 40, 57, 60, 1, 18, 29, 39, 4, 47, 54, 59, 63, 8, 19, 21, 32, 4, 49, 9, 4, 11, 20, 54, 8, 12, 16, 2, 27, 8, 36, 38, 4, 63, 28, 3, 36, 33, 40, 9, 13, 15, 32, 38, 5, 62, 17, 22, 23, 30, 41, 25, 26, 29, 35, 5, 14, 21, 4, 62, 2, 32, 17, 55, 4, 40, 43, 8, 19, 53, 56, 6, 29, 31, 55, 57, 62, 63, 11, 23, 30, 39, 56, 26, 29, 36, 63, 8, 22, 23, 35, 40, 12, 2, 3, 39, 9, 21, 37, 8, 11, 18, 37, 48, 5, 51, 56, 34, 40, 45, 56, 58
  };
  int dist[] = {
      52404, 9787, 2199, 49086, 58606, 13062, 27122, 27300, 23786, 33348, 35709, 31589, 54907, 16741, 24308, 3078, 61646, 32817, 37159, 38731, 8813, 46970, 37159, 7666, 27927, 51933, 63818, 10070, 20736, 14195, 1499, 29188, 18491, 23692, 63662, 27593, 6834, 42970, 4977, 52372, 13421, 49613, 44076, 27122, 56935, 13994, 21435, 27206, 36276, 27300, 13024, 8979, 64758, 54689, 13921, 15027, 63414, 34574, 61647, 6552, 32142, 2012, 19304, 51115, 42970, 47458, 398, 42962, 30642, 64849, 1387, 56935, 52404, 63998, 26365, 3078, 46970, 57837, 2728, 13994, 3393, 30009, 24438, 53347, 41327, 38842, 29188, 33855, 65397, 42995, 30329, 63998, 59182, 45170, 33086, 13024, 61647, 3393, 42995, 34960, 58771, 22955, 58675, 6552, 34960, 47002, 1279, 23786, 5827, 55702, 39168, 26365, 36319, 4977, 25919, 16641, 8162, 27382, 18321, 1006, 35930, 32142, 8599, 29144, 5649, 32727, 52372, 9787, 52246, 18491, 21435, 42962, 52246, 25839, 2580, 15832, 27206, 8979, 59182, 33348, 1537, 41566, 21729, 13421, 61646, 6864, 54888, 30009, 25839, 57042, 36276, 49222, 10609, 53374, 49458, 5827, 27988, 50531, 5916, 27988, 10616, 7666, 23692, 29353, 58771, 32817, 4244, 1817, 11351, 24438, 33855, 25919, 10616, 48475, 33993, 53347, 45170, 1537, 27927, 64276, 2199, 8599, 6864, 30187, 54050, 398, 50690, 28511, 57291, 49613, 49086, 2580, 38770, 16379, 41327, 35709, 40846, 51667, 2012, 58606, 31589, 18321, 48475, 36517, 7075, 22973, 13062, 47002, 49222, 36517, 51933, 22595, 14713, 59076, 2439, 64758, 55702, 16641, 4244, 63818, 17763, 19304, 10070, 30642, 36319, 16270, 54689, 57837, 33086, 54907, 54888, 13921, 50690, 40846, 20736, 6442, 57042, 38731, 28511, 33993, 22595, 51115, 38842, 30329, 1817, 51667, 63662, 12162, 22955, 1006, 29144, 50531, 17763, 15832, 41566, 10609, 30187, 27593, 65397, 8162, 14195, 60146, 16741, 11351, 58675, 20739, 1499, 14713, 16270, 15027, 39168, 20739, 51501, 44076, 53374, 29353, 51501, 22557, 27555, 9722, 64849, 5649, 5916, 7075, 22557, 21729, 49458, 57291, 24933, 63414, 35930, 32727, 54050, 59076, 2728, 24308, 8813, 22973, 47458, 27382, 38770, 34574, 1387, 1279, 16379, 12162, 6834, 60146, 27555, 64276, 2439, 6442, 9722, 24933
  };
  int edge[] = {
      0, 2, 8, 15, 21, 31, 38, 43, 49, 58, 66, 67, 72, 80, 87, 89, 91, 97, 104, 107, 111, 114, 118, 122, 127, 131, 138, 144, 147, 151, 155, 159, 164, 169, 175, 180, 185, 190, 194, 199, 206, 216, 222, 223, 227, 232, 236, 239, 242, 248, 253, 258, 262, 264, 266, 270, 274, 280, 285, 290, 294, 299, 302, 309
  };

  // Data structures for Dijkstras algorithm
  //int done[]= new int[n]; // 1 bit
  //int prev=new int[n];
  //int wght[]=new int[n];
   int done[n];
   int prev[n];
   int wght[n];

  const int MAX=1000000;

  /* Function to print an array */
  void printArray(int arr[], int size){
    int i;
    for (i = 0; i < size; i++)
      printf("%d ", arr[i]);
    printf("\n");
  }

#define mx 500000

int main(){
	int mx1=mx/n;
  // clock_t t0=clock();
  // for(int h=0;h<10;h++){
    int lng=0;
    for(int n1=0;n1<n;n1++){
      for(int k1=0;k1<mx1;k1++){
        int start=n1;
        for(int i=0;i<n;i++){done[i]=0; prev[i]=-1; wght[i]=MAX;}

        wght[start]=0;
        int cur=-1, w = 0;
        for(int k=0;k<n;k++) {
          cur = -1; w = MAX;
          for (int i = 0; i < n; i++) {
            if (done[i]==0 && wght[i] < w) {
              cur = i;
              w = wght[i];
            }
          }
          if(cur<0)break;
          int j = edge[cur];
          while (j < m) {
            int n1 = node1[j], n2 = node2[j], d = dist[j];
            if (n1 != cur) break;
            int d2 = wght[n2], d3 = w + d;
            if (d2 > d3) {
              prev[n2] = cur;
              wght[n2] = d3;
            }
            j++;
          }
          done[cur] = 1;
        }
        cur = n-1;
        while(cur!=start){
          lng+=wght[cur];
          cur = prev[cur];
        }
      }
    }
    printf("done %d\n",lng);
   // double t2=(double)(clock()-t0)/CLOCKS_PER_SEC;
   // double t3= t2/(h+1);
   // double t4= t3*1000000/(mx);
   // printf("time %f %f %f\n",t3,t2,t4);
   // } 
  return 0;
}

/*

C:\mads>dijkstra3.exe
done 1965233412
time 4.515000 4.515000 9.030000
done 1965233412
time 4.609000 9.218000 9.218000
done 1965233412
time 4.552000 13.656000 9.104000
done 1965233412
time 4.531000 18.124000 9.062000
done 1965233412
time 4.524800 22.624000 9.049600
done 1965233412
time 4.536333 27.218000 9.072667
done 1965233412
time 4.540143 31.781000 9.080286
done 1965233412
time 4.542875 36.343000 9.085750
done 1965233412
time 4.539889 40.859000 9.079778
done 1965233412
time 4.542100 45.421000 9.084200

C:\mads>pause
Press any key to continue . . .
*/
